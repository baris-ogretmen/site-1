<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarÄ±ÅŸ Hoca | AkÄ±l ve Zeka OyunlarÄ±</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { margin: 0; font-family: 'Fredoka', sans-serif; background: #fff1f2; color: #333; }
        
        /* HEADER */
        header { 
            background: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%); 
            padding: 30px; text-align: center; color: white; 
            border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; 
            box-shadow: 0 10px 25px rgba(225, 29, 72, 0.3); 
            position: relative; overflow: hidden;
        }
        header::before { content: 'ğŸ§©'; position: absolute; top: 10px; left: 20px; font-size: 3rem; opacity: 0.2; transform: rotate(-20deg); }
        header::after { content: 'ğŸ§ '; position: absolute; bottom: 10px; right: 20px; font-size: 3rem; opacity: 0.2; transform: rotate(20deg); }

        .back-btn { display: inline-block; background: white; color: #e11d48; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; margin-bottom: 10px; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
        h1 { margin: 10px 0 0; font-size: 2rem; letter-spacing: 1px; }
        .subtitle { font-size: 1rem; opacity: 0.9; }

        .container { max-width: 900px; margin: 30px auto; padding: 0 15px; }
        
        .section-title { text-align: center; margin-bottom: 25px; margin-top: 40px; }
        .section-badge { background: #8b5cf6; color: white; padding: 8px 20px; border-radius: 30px; font-size: 1.1rem; box-shadow: 0 5px 0 #7c3aed; display: inline-block; }

        /* GRID YAPISI */
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
        
        /* KART TASARIMI */
        .game-card { 
            background: white; border-radius: 20px; padding: 25px 20px; text-align: center; 
            border: 3px solid #fecdd3; transition: 0.3s; position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            min-height: 240px;
        }
        .game-card:hover { transform: translateY(-10px); border-color: #f43f5e; box-shadow: 0 15px 30px rgba(244, 63, 94, 0.2); }
        
        .game-icon { font-size: 3.5rem; margin-bottom: 15px; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1)); transition: 0.3s; }
        .game-card:hover .game-icon { transform: scale(1.1) rotate(10deg); }
        
        .game-title { font-size: 1.3rem; color: #be123c; margin-bottom: 8px; font-weight: 600; }
        .game-desc { font-size: 0.95rem; color: #666; margin-bottom: 20px; line-height: 1.5; }
        
        .play-btn { 
            background: #10b981; color: white; text-decoration: none; padding: 10px 30px; 
            border-radius: 50px; font-weight: bold; font-size: 1rem; cursor: pointer; border: none;
            box-shadow: 0 5px 0 #059669; transition: 0.2s; width: 80%; display: inline-block;
        }
        .play-btn:active { transform: translateY(5px); box-shadow: none; }
        .play-btn:hover { background: #059669; }

        /* YENÄ° OYUN KARTLARI (MOR) */
        .card-new { border-color: #a78bfa; }
        .card-new:hover { border-color: #7c3aed; box-shadow: 0 15px 30px rgba(124, 58, 237, 0.2); }
        .btn-new { background: #8b5cf6; box-shadow: 0 5px 0 #6d28d9; }
        .btn-new:hover { background: #7c3aed; }

        /* BÄ°LGÄ° KUTUSU */
        .benefits-box { background: #fff; margin-top: 50px; padding: 25px; border-radius: 20px; border-left: 6px solid #f59e0b; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .benefits-title { color: #d97706; font-weight: bold; font-size: 1.2rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .benefit-list { list-style: none; padding: 0; margin: 0; }
        .benefit-list li { margin-bottom: 10px; display: flex; align-items: center; color: #4b5563; }
        .benefit-list li i { color: #10b981; margin-right: 10px; }

        /* MODAL (OYUN PENCERESÄ°) */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .game-window { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; position: relative; border: 4px solid #f43f5e; box-shadow: 0 0 50px rgba(244, 63, 94, 0.5); }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 2rem; cursor: pointer; color: #e11d48; }
        .game-area { margin-top: 20px; min-height: 150px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        .big-number { font-size: 5rem; font-weight: bold; color: #2563eb; animation: popIn 0.5s; }
        .reaction-box { width: 100%; height: 150px; background: #ef4444; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.5rem; cursor: pointer; user-select: none; }
        .reaction-box.green { background: #10b981; }

        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }

    </style>
</head>
<body>

    <header>
        <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Ana Sayfa</a>
        <h1>AkÄ±l ve Zeka AtÃ¶lyesi</h1>
        <div class="subtitle">Zihnini Ã§alÄ±ÅŸtÄ±r, stratejini konuÅŸtur! ğŸš€</div>
    </header>

    <div class="container">

        <div class="section-title"><span class="section-badge">ğŸ® PopÃ¼ler Oyunlar</span></div>
        <div class="games-grid">
            
            <div class="game-card">
                <div class="game-icon">â™Ÿï¸</div>
                <div class="game-title">HafÄ±za SatrancÄ±</div>
                <div class="game-desc">Renkleri aklÄ±nda tut, doÄŸru piyonu bul ve hafÄ±zanÄ± herkese kanÄ±tla!</div>
                <a href="https://baris-ogretmen.github.io/renkli-hafiza-satranci/" class="play-btn">Oyna</a>
            </div>

            <div class="game-card">
                <div class="game-icon">ğŸ”´</div>
                <div class="game-title">Hedef 4</div>
                <div class="game-desc">Rakibinden Ã¶nce 4 taÅŸÄ± yan yana, Ã¼st Ã¼ste veya Ã§apraz dizmeyi baÅŸar.</div>
                <a href="https://baris-ogretmen.github.io/hedef-4/" class="play-btn">Oyna</a>
            </div>

            <div class="game-card">
                <div class="game-icon">ğŸ§ </div>
                <div class="game-title">GÃ¶rsel HafÄ±za</div>
                <div class="game-desc">KartlarÄ± eÅŸleÅŸtir, hafÄ±zanÄ± gÃ¼Ã§lendir! BakalÄ±m ne kadar dikkatlisin?</div>
                <a href="beyazit.html" class="play-btn">Oyna</a>
            </div>
            
        </div>

        <div class="section-title" style="margin-top:50px;"><span class="section-badge" style="background:#2563eb; box-shadow:0 5px 0 #1d4ed8;">âš¡ AnlÄ±k Beyin Egzersizleri</span></div>
        <div class="games-grid">
             
             <div class="game-card card-new">
                <div class="game-icon">ğŸ”¢</div>
                <div class="game-title">SayÄ± CanavarÄ±</div>
                <div class="game-desc">Ekranda beliren sayÄ±yÄ± ezberle. Kaybolunca aynÄ±sÄ±nÄ± yaz. Her tur zorlaÅŸÄ±r!</div>
                <button onclick="openMemoryGame()" class="play-btn btn-new">Hemen Oyna</button>
            </div>
            
            <div class="game-card card-new">
                <div class="game-icon">âš¡</div>
                <div class="game-title">Refleks Testi</div>
                <div class="game-desc">KÄ±rmÄ±zÄ± kutu YEÅÄ°L olduÄŸu anda tÄ±kla! Milisaniyelik tepki sÃ¼reni Ã¶lÃ§.</div>
                <button onclick="openReactionGame()" class="play-btn btn-new">Hemen Oyna</button>
            </div>
        </div>

        <div id="panel-baslik" class="section-title" style="display:none; margin-top:50px;">
            <span class="section-badge" style="background:#db2777; box-shadow:0 5px 0 #be185d;">âœ¨ Panelden Eklenenler</span>
        </div>
        <div id="panel-oyunlari" class="games-grid"></div>


        <div class="benefits-box">
            <div class="benefits-title"><i class="fas fa-lightbulb"></i> Neden AkÄ±l OyunlarÄ±?</div>
            <ul class="benefit-list">
                <li><i class="fas fa-check-circle"></i> Odaklanma sÃ¼resini artÄ±rÄ±r.</li>
                <li><i class="fas fa-check-circle"></i> GÃ¶rsel hafÄ±zayÄ± ve dikkati gÃ¼Ã§lendirir.</li>
                <li><i class="fas fa-check-circle"></i> Problem Ã§Ã¶zme yeteneÄŸi kazandÄ±rÄ±r.</li>
                <li><i class="fas fa-check-circle"></i> HÄ±zlÄ± ve stratejik dÃ¼ÅŸÃ¼nmeyi saÄŸlar.</li>
            </ul>
        </div>

    </div>

    <div id="modal-memory" class="modal-overlay">
        <div class="game-window">
            <span class="close-modal" onclick="closeModal('modal-memory')">&times;</span>
            <h2 style="color:#2563eb;">ğŸ”¢ SayÄ± CanavarÄ±</h2>
            <div id="mem-game-area" class="game-area">
                <p>BaÅŸla butonuna bas, sayÄ±yÄ± ezberle!</p>
                <button onclick="startMemoryLevel()" class="play-btn btn-new" style="width:auto;">BAÅLA</button>
            </div>
        </div>
    </div>

    <div id="modal-reaction" class="modal-overlay">
        <div class="game-window">
            <span class="close-modal" onclick="closeModal('modal-reaction')">&times;</span>
            <h2 style="color:#ef4444;">âš¡ Refleks Testi</h2>
            <p>Kutu <b>YEÅÄ°L</b> olunca tÄ±kla!</p>
            <div id="react-box" class="reaction-box" onclick="reactClick()">BAÅLA</div>
            <p id="react-result" style="margin-top:10px; font-weight:bold;"></p>
        </div>
    </div>

    <script>
        const db = firebase.firestore();

        // 1. DÄ°NAMÄ°K VERÄ° Ã‡EKME
        db.collection("projeler").orderBy("tarih", "desc").onSnapshot((snapshot) => {
            const liste = document.getElementById("panel-oyunlari");
            const baslik = document.getElementById("panel-baslik");
            
            // Listeyi temizle (tekrarÄ± Ã¶nlemek iÃ§in)
            liste.innerHTML = "";
            let icerikVar = false;

            const sabitLinkler = [
                "https://baris-ogretmen.github.io/renkli-hafiza-satranci/",
                "https://baris-ogretmen.github.io/hedef-4/",
                "beyazit.html"
            ];

            snapshot.forEach((doc) => {
                const veri = doc.data();
                let kat = (veri.kategori || "").toLowerCase();

                // Kategori Filtresi: Zeka, AkÄ±l, MantÄ±k, Sudoku (SatranÃ§ hariÃ§)
                if ((kat.includes("zeka") || kat.includes("akÄ±l") || kat.includes("mantÄ±k") || kat.includes("sudoku")) && !kat.includes("satranÃ§")) {
                    
                    if (!sabitLinkler.includes(veri.link)) {
                        icerikVar = true;
                        
                        liste.innerHTML += `
                            <div class="game-card" style="border-color:#db2777;">
                                <div class="game-icon" style="filter: hue-rotate(280deg);">ğŸ’¡</div>
                                <div class="game-title" style="color:#be185d;">${veri.baslik}</div>
                                <div class="game-desc">${veri.aciklama || 'Yeni zeka oyunu!'}</div>
                                <a href="${veri.link}" target="_blank" class="play-btn" style="background:#db2777; box-shadow:0 5px 0 #be185d;">Oyna</a>
                            </div>`;
                    }
                }
            });

            if(icerikVar) baslik.style.display = "block";
            else baslik.style.display = "none";
        });

        // --- MÄ°NÄ° OYUN MOTORLARI ---

        // A. SAYI HAFIZASI
        let memLevel = 1;
        let currentNum = "";

        function openMemoryGame() {
            document.getElementById('modal-memory').style.display = 'flex';
            memLevel = 1;
            document.getElementById('mem-game-area').innerHTML = `<p>Seviye 1'den baÅŸlÄ±yoruz.</p><button onclick="startMemoryLevel()" class="play-btn btn-new" style="width:auto;">BAÅLA</button>`;
        }

        function startMemoryLevel() {
            // Rastgele sayÄ± Ã¼ret (Seviye kadar basamak)
            let min = Math.pow(10, memLevel - 1);
            let max = Math.pow(10, memLevel) - 1;
            currentNum = Math.floor(min + Math.random() * (max - min + 1));

            const area = document.getElementById('mem-game-area');
            area.innerHTML = `<div class="big-number">${currentNum}</div><p>EZBERLE!</p>`;

            // 2 saniye sonra gizle ve sor
            setTimeout(() => {
                area.innerHTML = `
                    <p>SayÄ± neydi?</p>
                    <input type="number" id="mem-input" style="padding:10px; font-size:1.2rem; width:100px; text-align:center; margin-bottom:10px;">
                    <button onclick="checkMemory()" class="play-btn btn-new" style="width:auto;">KONTROL ET</button>
                `;
                document.getElementById('mem-input').focus();
            }, 2000); // 2 saniye bekleme sÃ¼resi
        }

        function checkMemory() {
            const val = document.getElementById('mem-input').value;
            const area = document.getElementById('mem-game-area');
            
            if(val == currentNum) {
                memLevel++;
                area.innerHTML = `<h3 style="color:green">DOÄRU! ğŸ‰</h3><p>SÄ±radaki Seviye: ${memLevel}</p><button onclick="startMemoryLevel()" class="play-btn btn-new">DEVAM ET</button>`;
            } else {
                area.innerHTML = `<h3 style="color:red">YANLIÅ! ğŸ˜”</h3><p>SayÄ±: ${currentNum} idi.</p><p>Skorun: Seviye ${memLevel}</p><button onclick="startMemoryLevel(); memLevel=1;" class="play-btn" style="background:#333; width:auto;">TEKRAR DENE</button>`;
                memLevel = 1;
            }
        }

        // B. REFLEKS TESTÄ°
        let reactState = 'waiting'; // waiting, ready, green, result
        let reactTimer;
        let startTime;

        function openReactionGame() {
            document.getElementById('modal-reaction').style.display = 'flex';
            resetReaction();
        }

        function resetReaction() {
            const box = document.getElementById('react-box');
            box.style.background = '#ef4444';
            box.innerText = "BAÅLA";
            document.getElementById('react-result').innerText = "";
            reactState = 'waiting';
        }

        function reactClick() {
            const box = document.getElementById('react-box');
            const res = document.getElementById('react-result');

            if(reactState === 'waiting') {
                reactState = 'ready';
                box.style.background = '#ef4444';
                box.innerText = "BEKLE...";
                res.innerText = "";
                
                // Rastgele 1-4 saniye bekle
                const delay = 1000 + Math.random() * 3000;
                reactTimer = setTimeout(() => {
                    reactState = 'green';
                    box.style.background = '#10b981';
                    box.innerText = "TIKLA!";
                    startTime = Date.now();
                }, delay);

            } else if (reactState === 'ready') {
                // Erken bastÄ±
                clearTimeout(reactTimer);
                box.innerText = "Ã‡ok Erken!";
                res.innerText = "Ceza! Bekle ve tekrar dene.";
                reactState = 'waiting';
                setTimeout(resetReaction, 1000);

            } else if (reactState === 'green') {
                // BaÅŸarÄ±lÄ±
                const reactionTime = Date.now() - startTime;
                box.style.background = '#3b82f6';
                box.innerText = reactionTime + " ms";
                
                let msg = "";
                if(reactionTime < 200) msg = "âš¡ ÅÄ°MÅEK GÄ°BÄ°SÄ°N!";
                else if(reactionTime < 300) msg = "ğŸ”¥ Ã‡OK HIZLI!";
                else if(reactionTime < 400) msg = "ğŸ‘ Ä°YÄ°!";
                else msg = "ğŸ¢ BÄ°RAZ YAVAÅ...";
                
                res.innerText = msg;
                reactState = 'waiting';
            }
        }

        function closeModal(id) {
            document.getElementById(id).style.display = 'none';
        }
    </script>

</body>
</html>
