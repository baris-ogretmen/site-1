<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Hikaye YÃ¼kleyici - Kalplerin Kandili</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #fffbeb; }
        .box { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; border: 2px solid #d97706; max-width: 600px; }
        h1 { color: #b45309; margin-bottom: 10px; }
        p { color: #4b5563; }
        button { background: #d97706; color: white; border: none; padding: 15px 30px; font-size: 1.2rem; font-weight: bold; border-radius: 10px; cursor: pointer; transition: 0.3s; margin-top: 20px; width: 100%; }
        button:hover { background: #b45309; transform: translateY(-2px); }
        #status { margin-top: 20px; font-weight: bold; color: #333; }
    </style>
</head>
<body>

    <div class="box">
        <h1>ğŸ“š "Kalplerin Kandili" Hikayesini YÃ¼kle</h1>
        <p>Senin yazdÄ±ÄŸÄ±n <b>Ä°mam Rabbani</b> hikayesini veritabanÄ±na iÅŸlemek ve vitrine koymak iÃ§in aÅŸaÄŸÄ±daki butona bas.</p>
        <button onclick="kitabiYukle()">HÄ°KAYEYÄ° SÄ°STEME YÃœKLE</button>
        <div id="status"></div>
    </div>

    <script>
        function kitabiYukle() {
            const db = firebase.firestore();
            const status = document.getElementById("status");
            status.innerHTML = "â³ Hikaye iÅŸleniyor...";

            // SENÄ°N GÃ–NDERDÄ°ÄÄ°N HÄ°KAYE METNÄ° (SAYFALARA BÃ–LÃœNMÃœÅ HALÄ°)
            const kitapVerisi = {
                baslik: "Kalplerin Kandili: Ä°mam Rabbaniâ€™nin YolculuÄŸu",
                tarih: firebase.firestore.FieldValue.serverTimestamp(),
                sayfalar: [
                    {
                        // KAPAK VE GÄ°RÄ°Å
                        img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiQ5yN7j4t8gXqJq5Z8kL9mN0oP1qR2sT3uV4wX5yZ6aB7cC8dD9eE0fF1gH2iJ3kL4mN5oP6qR7sT8uV9wX0yZ1aB2cC3dD4eE5fF6gH7iJ8kL9mN0oP1qR2/s1600/imam-rabbani.jpg", 
                        text: "<h2 style='color:#d97706;'>Kalplerin Kandili</h2><br>Ã‡ok uzun zaman Ã¶nce, Hindistanâ€™Ä±n Sarhind kasabasÄ±nda <b>Ahmad</b> adÄ±nda bir Ã§ocuk yaÅŸardÄ±. Ahmad, akranlarÄ± oyun oynarken bile elinden kitabÄ±nÄ± dÃ¼ÅŸÃ¼rmezdi.<br><br>BabasÄ± Abdal-Ahad, oÄŸlundaki bu Ã¶ÄŸrenme aÅŸkÄ±nÄ± gÃ¶rÃ¼nce gÃ¼lÃ¼msedi. <b style='color:#b45309;'>'Bilgi, karanlÄ±kta yolunu bulmanÄ± saÄŸlayan bir yÄ±ldÄ±zdÄ±r Ahmad,'</b> dedi."
                    },
                    {
                        // SAYFA 2: ARAYIÅ
                        img: "https://img.freepik.com/free-vector/gradient-library-interior-background_23-2149330623.jpg", 
                        text: "KÃ¼Ã§Ã¼k Ahmad, o gece yÄ±ldÄ±zlara bakarak iÃ§inden bir sÃ¶z verdi: Sadece kendisi iÃ§in deÄŸil, herkes iÃ§in bir Ä±ÅŸÄ±k olacaktÄ±.<br><br>YÄ±llar geÃ§tikÃ§e Ahmadâ€™Ä±n kalbindeki merak daha da bÃ¼yÃ¼dÃ¼. <b style='color:blue;'>'GerÃ§ek bilgi sadece zihinle deÄŸil, kalple Ã¶ÄŸrenilir,'</b> diye dÃ¼ÅŸÃ¼ndÃ¼ ve bÃ¼yÃ¼k bir Ã¶ÄŸretmen aramaya karar verdi."
                    },
                    {
                        // SAYFA 3: EÄÄ°TÄ°M VE DÃ–NÃœÅ
                        img: "https://img.freepik.com/free-vector/teacher-standing-near-blackboard-holding-stick-isolated-flat-vector-illustration-cartoon-woman-character-near-chalkboard-school-learning-concept_74855-13272.jpg", 
                        text: "Sonunda Delhi ÅŸehrine ulaÅŸtÄ± ve bilge Ã¶ÄŸretmen Baqi ile tanÄ±ÅŸtÄ±. Baqi ona sabretmeyi ve her canlÄ±nÄ±n iÃ§indeki gÃ¼zelliÄŸi gÃ¶rmeyi Ã¶ÄŸretti.<br><br>EÄŸitimini tamamlayan Ahmad, Sarhindâ€™e geri dÃ¶ndÃ¼. ArtÄ±k insanlar ona <b>'Ä°mam Rabbani'</b> diyordu. GenÃ§ Ã¶ÄŸrencisi Sami'ye ÅŸÃ¶yle dedi: <b style='color:#059669;'>'En bÃ¼yÃ¼k ders, dÃ¼rÃ¼stlÃ¼k ve sevgiyle yoÄŸrulmuÅŸ bir ahlaktÄ±r evladÄ±m.'</b>"
                    },
                    {
                        // SAYFA 4: ZÄ°NDAN VE MEKTUPLAR
                        img: "https://img.freepik.com/free-vector/hand-drawn-essay-illustration_23-2150268421.jpg", 
                        text: "Zamanla haksÄ±zlÄ±klar artÄ±nca Ä°mam Rabbani doÄŸruyu sÃ¶ylediÄŸi iÃ§in bir kaleye hapsedildi. Ancak o, karanlÄ±k zindanÄ± bile bir okul haline getirdi.<br><br>Zindandan Ã§Ä±ktÄ±ÄŸÄ±nda, artÄ±k <b>'Bin YÄ±lÄ±n Yenileyicisi'</b> olarak anÄ±lÄ±yordu. Binlerce sayfalÄ±k mektuplar yazdÄ±. YazdÄ±ÄŸÄ± her kelime, bir kalbi iyileÅŸtiriyordu."
                    },
                    {
                        // SAYFA 5: SON VE MÄ°RAS
                        img: "https://img.freepik.com/free-vector/mosque-landscape-background_1308-27807.jpg", 
                        text: "Bir gÃ¼n Sami ile bahÃ§ede yÃ¼rÃ¼rken, <b style='color:#d97706;'>'En kÃ¼Ã§Ã¼k karÄ±ncadan en bÃ¼yÃ¼k yÄ±ldÄ±za kadar her ÅŸey bize bir ÅŸeyler anlatÄ±r,'</b> dedi.<br><br>Ä°mam Rabbaniâ€™nin ektiÄŸi o tohumlar bugÃ¼n bile Ã§iÃ§ek aÃ§maya devam ediyor. Kalbinde sevgi ve zihninde doÄŸru bilgi olan hiÃ§ kimse, yolunu asla kaybetmez.<br><br><b>-SON-</b>"
                    }
                ]
            };

            // 1. VeritabanÄ±na Ekle
            db.collection("dijital_kitaplar").add(kitapVerisi).then((docRef) => {
                const kitapLink = `kitap-oku.html?id=${docRef.id}`;

                // 2. Kitap Listesine Ekle
                db.collection("kitaplar").add({
                    baslik: kitapVerisi.baslik,
                    altBaslik: "Ä°mam Rabbani'nin YolculuÄŸu",
                    link: kitapLink,
                    renk: "linear-gradient(135deg, #f59e0b, #d97706)", // Turuncu Tema
                    sira: 999, // En Ã¼stte
                    tarih: firebase.firestore.FieldValue.serverTimestamp()
                }).then(() => {
                    
                    // 3. Otomatik Vitrin (Mavi Kutu)
                    db.collection("site_ayarlari").doc("vitrin_kitap").set({
                        baslik: kitapVerisi.baslik,
                        link: kitapLink
                    });

                    status.innerHTML = "âœ… HÄ°KAYE BAÅARIYLA YÃœKLENDÄ°!";
                    status.style.color = "green";
                    alert("Hikayen yÃ¼klendi ve vitrine konuldu hocam!");
                });
            }).catch((error) => {
                status.innerHTML = "âŒ HATA: " + error.message;
                status.style.color = "red";
            });
        }
    </script>
</body>
</html>
