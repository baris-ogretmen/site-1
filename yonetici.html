<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YÃ¶netici Paneli | BarÄ±ÅŸ Ä°lkan</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="firebase-config.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f1f5f9; margin: 0; display: flex; height: 100vh; }
        
        /* SOL MENÃœ */
        .sidebar { width: 250px; background: #1e293b; color: white; display: flex; flex-direction: column; padding: 20px; box-shadow: 2px 0 10px rgba(0,0,0,0.1); }
        .sidebar h2 { margin-bottom: 30px; font-size: 1.5rem; text-align: center; color: #fcd34d; }
        .menu-btn { background: none; border: none; color: #cbd5e1; text-align: left; padding: 15px; font-size: 1rem; cursor: pointer; transition: 0.3s; border-radius: 10px; margin-bottom: 5px; display: flex; align-items: center; gap: 10px; }
        .menu-btn:hover, .menu-btn.active { background: #334155; color: white; transform: translateX(5px); }
        .menu-btn i { width: 20px; text-align: center; }

        /* Ä°Ã‡ERÄ°K ALANI */
        .main-content { flex: 1; padding: 40px; overflow-y: auto; }
        .panel-section { display: none; animation: fadeIn 0.3s; }
        .panel-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); max-width: 800px; margin: 0 auto; }
        h3 { color: #1e293b; margin-top: 0; border-bottom: 2px solid #e2e8f0; padding-bottom: 15px; margin-bottom: 20px; }

        /* FORMLAR */
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #475569; }
        input, textarea, select { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; transition: 0.3s; box-sizing: border-box; }
        input:focus, textarea:focus, select:focus { border-color: #6366f1; outline: none; }
        
        .btn-submit { background: #2563eb; color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1rem; font-weight: bold; cursor: pointer; width: 100%; transition: 0.3s; margin-top: 10px; }
        .btn-submit:hover { background: #1d4ed8; transform: translateY(-2px); }
        .btn-danger { background: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem; margin-left: 10px; }

        /* LÄ°STE GÃ–RÃœNÃœMÃœ */
        .item-list { list-style: none; padding: 0; }
        .item-row { background: #f8fafc; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #e2e8f0; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>Panel v2.0</h2>
        <button class="menu-btn active" onclick="showSection('yazi-ekle')"><i class="fas fa-edit"></i> KÃ¶ÅŸe YazÄ±sÄ±</button>
        <button class="menu-btn" onclick="showSection('kitap-ekle')"><i class="fas fa-book"></i> Kitap YÃ¶netimi</button>
        <button class="menu-btn" onclick="showSection('duyuru-ekle')"><i class="fas fa-bullhorn"></i> Duyurular</button>
        <button class="menu-btn" onclick="showSection('proje-ekle')"><i class="fas fa-project-diagram"></i> Projeler</button>
        <button class="menu-btn" onclick="showSection('tavsiye-ekle')"><i class="fas fa-star"></i> Tavsiyeler</button>
        <button class="menu-btn" onclick="showSection('ayarlar')"><i class="fas fa-robot"></i> Robot AyarlarÄ±</button>
        <div style="margin-top:auto; font-size:0.8rem; color:#64748b; text-align:center;">BarÄ±ÅŸ Ä°lkan Â© 2026</div>
    </div>

    <div class="main-content">
        
        <div id="yazi-ekle" class="panel-section active">
            <div class="card">
                <h3>ğŸ“ KÃ¶ÅŸe YazÄ±sÄ± Ekle</h3>
                <div class="form-group">
                    <label>BaÅŸlÄ±k</label>
                    <input type="text" id="yazi-baslik" placeholder="Ã–rn: NiÃ§in Nebevi EÄŸitim?">
                </div>
                <div class="form-group">
                    <label>Ä°Ã§erik (HTML KodlarÄ± Desteklenir)</label>
                    <textarea id="yazi-icerik" rows="12" placeholder="YazÄ±nÄ±zÄ± buraya yapÄ±ÅŸtÄ±rÄ±n..."></textarea>
                </div>
                <button class="btn-submit" onclick="yaziKaydet()">KAYDET VE YAYINLA</button>
            </div>
        </div>

        <div id="kitap-ekle" class="panel-section">
            <div class="card">
                <h3>ğŸ“š Kitap Ekle</h3>
                <div class="form-group">
                    <label>Kitap BaÅŸlÄ±ÄŸÄ±</label>
                    <input type="text" id="kitap-baslik" placeholder="Ã–rn: Ben Ali">
                </div>
                <div class="form-group">
                    <label>Alt BaÅŸlÄ±k</label>
                    <input type="text" id="kitap-alt" placeholder="Ã–rn: Nebevi Model">
                </div>
                <div class="form-group">
                    <label>Link (Dosya AdÄ±)</label>
                    <input type="text" id="kitap-link" placeholder="Ã–rn: ben-ali.html">
                </div>
                <div class="form-group">
                    <label>Kapak Rengi (CSS Gradient)</label>
                    <select id="kitap-renk">
                        <option value="linear-gradient(135deg, #f59e0b, #b45309)">Turuncu (Ali 1)</option>
                        <option value="linear-gradient(135deg, #06b6d4, #3b82f6)">Mavi (Ali 2)</option>
                        <option value="linear-gradient(135deg, #ef4444, #991b1b)">KÄ±rmÄ±zÄ± (Halid)</option>
                        <option value="linear-gradient(135deg, #ec4899, #be185d)">Pembe (MÃ¼zik)</option>
                        <option value="linear-gradient(135deg, #10b981, #047857)">YeÅŸil (Genel)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>SÄ±ra No (BÃ¼yÃ¼k Olan En Ãœstte Ã‡Ä±kar)</label>
                    <input type="number" id="kitap-sira" value="1">
                </div>
                <button class="btn-submit" onclick="kitapKaydet()">KÄ°TABI EKLE</button>
                
                <h4 style="margin-top:30px;">Mevcut Kitaplar</h4>
                <ul id="kitap-listesi" class="item-list"></ul>
            </div>
        </div>

        <div id="duyuru-ekle" class="panel-section">
            <div class="card">
                <h3>ğŸ“¢ Kayan YazÄ± Duyurusu</h3>
                <div class="form-group">
                    <label>Duyuru Metni</label>
                    <input type="text" id="duyuru-metin" placeholder="Ã–rn: Sitemize hoÅŸ geldiniz...">
                </div>
                <button class="btn-submit" onclick="duyuruKaydet()">YAYINLA</button>
            </div>
        </div>

        <div id="proje-ekle" class="panel-section">
            <div class="card">
                <h3>âš¡ Proje / Ä°Ã§erik Ekle</h3>
                <div class="form-group"><label>BaÅŸlÄ±k</label><input type="text" id="proje-baslik"></div>
                <div class="form-group"><label>Kategori</label><input type="text" id="proje-kategori"></div>
                <div class="form-group"><label>Link</label><input type="text" id="proje-link"></div>
                <div class="form-group"><label>Ä°kon (FontAwesome)</label><input type="text" id="proje-icon" value="fa-star"></div>
                <button class="btn-submit" onclick="projeKaydet()">EKLE</button>
            </div>
        </div>

        <div id="tavsiye-ekle" class="panel-section">
            <div class="card">
                <h3>ğŸŒŸ Tavsiye Ekle</h3>
                <div class="form-group"><label>BaÅŸlÄ±k</label><input type="text" id="tavsiye-baslik"></div>
                <div class="form-group"><label>AÃ§Ä±klama</label><input type="text" id="tavsiye-aciklama"></div>
                <div class="form-group"><label>Link</label><input type="text" id="tavsiye-link"></div>
                <button class="btn-submit" onclick="tavsiyeKaydet()">EKLE</button>
            </div>
        </div>

        <div id="ayarlar" class="panel-section">
            <div class="card">
                <h3>ğŸ¤– Robot Asistan AyarlarÄ±</h3>
                <div class="form-group">
                    <label>Google Gemini API Key</label>
                    <input type="text" id="api-key" placeholder="AIzaSy...">
                </div>
                <div class="form-group">
                    <label>Robotun KiÅŸiliÄŸi (Prompt)</label>
                    <textarea id="prompt-text" rows="4" placeholder="Sen BarÄ±ÅŸ Hoca'nÄ±n asistanÄ±sÄ±n..."></textarea>
                </div>
                <button class="btn-submit" onclick="robotAyarlariKaydet()">AYARLARI KAYDET</button>
            </div>
        </div>

    </div>

    <script>
        const db = firebase.firestore();

        // SEKMELER ARASI GEÃ‡Ä°Å
        function showSection(id) {
            document.querySelectorAll('.panel-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.currentTarget.classList.add('active');
            if(id === 'kitap-ekle') kitaplariGetir();
        }

        // 1. KÃ–ÅE YAZISI KAYDET
        function yaziKaydet() {
            const baslik = document.getElementById('yazi-baslik').value;
            const icerik = document.getElementById('yazi-icerik').value;
            if(!baslik || !icerik) { alert("LÃ¼tfen baÅŸlÄ±k ve iÃ§erik giriniz."); return; }
            db.collection("yazilar").add({ baslik: baslik, icerik: icerik, tarih: firebase.firestore.FieldValue.serverTimestamp() })
            .then(() => { alert("YazÄ± baÅŸarÄ±yla yayÄ±nlandÄ±!"); document.getElementById('yazi-baslik').value=""; document.getElementById('yazi-icerik').value=""; });
        }

        // 2. KÄ°TAP KAYDETME FONKSÄ°YONU
        function kitapKaydet() {
            const baslik = document.getElementById('kitap-baslik').value;
            const alt = document.getElementById('kitap-alt').value;
            const link = document.getElementById('kitap-link').value;
            const renk = document.getElementById('kitap-renk').value;
            const sira = document.getElementById('kitap-sira').value;

            if(!baslik || !link) { alert("BaÅŸlÄ±k ve Link zorunludur!"); return; }

            db.collection("kitaplar").add({
                baslik: baslik,
                altBaslik: alt,
                link: link,
                renk: renk,
                sira: parseInt(sira), // SÄ±ralama iÃ§in sayÄ±ya Ã§eviriyoruz
                kapakMetni: baslik.replace(" ", "\n"), // Kapaktaki alt alta yazÄ± iÃ§in
                etiket: "Oku",
                tarih: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("Kitap eklendi!");
                kitaplariGetir(); // Listeyi yenile
                // Formu temizle
                document.getElementById('kitap-baslik').value = "";
                document.getElementById('kitap-link').value = "";
            });
        }

        // MEVCUT KÄ°TAPLARI LÄ°STELEME
        function kitaplariGetir() {
            const liste = document.getElementById('kitap-listesi');
            liste.innerHTML = "YÃ¼kleniyor...";
            db.collection("kitaplar").orderBy("sira", "desc").get().then(snap => {
                liste.innerHTML = "";
                snap.forEach(doc => {
                    const k = doc.data();
                    liste.innerHTML += `
                        <li class="item-row">
                            <span><b>${k.baslik}</b> (${k.link}) - SÄ±ra: ${k.sira}</span>
                            <button class="btn-danger" onclick="sil('kitaplar', '${doc.id}')">Sil</button>
                        </li>
                    `;
                });
            });
        }

        // 3. DUYURU KAYDET
        function duyuruKaydet() {
            const metin = document.getElementById('duyuru-metin').value;
            if(!metin) return;
            db.collection("duyurular").add({ metin: metin, tarih: firebase.firestore.FieldValue.serverTimestamp() })
            .then(() => { alert("Duyuru banda eklendi!"); document.getElementById('duyuru-metin').value=""; });
        }

        // 4. PROJE KAYDET
        function projeKaydet() {
            const baslik = document.getElementById('proje-baslik').value;
            const link = document.getElementById('proje-link').value;
            const kat = document.getElementById('proje-kategori').value;
            const icon = document.getElementById('proje-icon').value;
            db.collection("projeler").add({ baslik: baslik, link: link, kategori: kat, icon: icon, tarih: firebase.firestore.FieldValue.serverTimestamp() })
            .then(() => alert("Proje eklendi!"));
        }

        // 5. TAVSÄ°YE KAYDET
        function tavsiyeKaydet() {
            const baslik = document.getElementById('tavsiye-baslik').value;
            const link = document.getElementById('tavsiye-link').value;
            const acik = document.getElementById('tavsiye-aciklama').value;
            db.collection("tavsiyeler").add({ baslik: baslik, link: link, aciklama: acik, icon: "fa-check", tarih: firebase.firestore.FieldValue.serverTimestamp() })
            .then(() => alert("Tavsiye eklendi!"));
        }

        // 6. ROBOT AYARLARI
        function robotAyarlariKaydet() {
            const key = document.getElementById('api-key').value;
            const prompt = document.getElementById('prompt-text').value;
            db.collection("site_ayarlari").doc("robot").set({ apiKey: key, prompt: prompt }, { merge: true })
            .then(() => alert("Robot ayarlarÄ± gÃ¼ncellendi!"));
        }

        // GENEL SÄ°LME FONKSÄ°YONU
        function sil(koleksiyon, id) {
            if(confirm("Silmek istediÄŸine emin misin?")) {
                db.collection(koleksiyon).doc(id).delete().then(() => {
                    alert("Silindi.");
                    if(koleksiyon === 'kitaplar') kitaplariGetir();
                });
            }
        }
    </script>
</body>
</html>
