<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YÃ¶netici Paneli - BarÄ±ÅŸ Ã–ÄŸretmen</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="firebase-config.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { font-family: sans-serif; background: #f3f4f6; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #1f2937; margin-bottom: 20px; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #374151; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 5px; box-sizing: border-box; }
        textarea { height: 100px; resize: vertical; }
        
        button { width: 100%; padding: 12px; background: #2563eb; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: 0.3s; }
        button:hover { background: #1d4ed8; }

        .preview { margin-top: 30px; border-top: 2px dashed #ddd; padding-top: 20px; }
        .preview h3 { text-align: center; color: #666; }
        
        /* Liste TasarÄ±mÄ± */
        .item-list { margin-top: 20px; }
        .item { background: #f9fafb; border: 1px solid #e5e7eb; padding: 15px; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .item div { flex: 1; }
        .item-title { font-weight: bold; color: #111; }
        .item-cat { font-size: 0.85rem; color: #666; background: #e5e7eb; padding: 2px 8px; border-radius: 10px; display: inline-block; margin-top: 5px; }
        .delete-btn { background: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-left: 10px; font-size: 0.8rem; width: auto; }
    </style>
</head>
<body>

    <div class="container">
        <h2>ðŸš€ Ä°Ã§erik Ekleme Paneli</h2>
        
        <div id="login-screen">
            <input type="email" id="email" placeholder="E-posta" style="margin-bottom:10px;">
            <input type="password" id="password" placeholder="Åžifre" style="margin-bottom:10px;">
            <button onclick="girisYap()">GiriÅŸ Yap</button>
        </div>

        <div id="panel-screen" style="display:none;">
            <div class="form-group">
                <label>BaÅŸlÄ±k</label>
                <input type="text" id="baslik" placeholder="Ã–rn: NÃ¶ron SavaÅŸÄ±">
            </div>

            <div class="form-group">
                <label>AÃ§Ä±klama</label>
                <textarea id="aciklama" placeholder="KÄ±sa bir aÃ§Ä±klama..."></textarea>
            </div>

            <div class="form-group">
                <label>Link (Dosya AdÄ± veya URL)</label>
                <input type="text" id="link" placeholder="Ã–rn: noron-savasi.html veya https://...">
            </div>

            <div class="form-group">
                <label>GÃ¶rsel Linki veya Ä°kon</label>
                <input type="text" id="gorsel" placeholder="Ã–rn: https://site.com/resim.jpg VEYA fa-chess">
                <small style="color:#666; font-size:0.8rem;">Resim adresi yapÄ±ÅŸtÄ±rÄ±n veya 'fa-gamepad' gibi ikon kodu yazÄ±n.</small>
            </div>

            <div class="form-group">
                <label>Kategori</label>
                <select id="kategori">
                    <option value="Genel">Genel</option>
                    <option value="SatranÃ§">SatranÃ§</option>
                    <option value="AkÄ±l Zeka">AkÄ±l Zeka</option>
                    <option value="MantÄ±k">MantÄ±k</option>
                    <option value="Kitap">Kitap / Hikaye</option>
                    <option value="Oyun">Oyun</option>
                </select>
            </div>

            <div class="form-group" style="display:flex; align-items:center; gap:10px;">
                <input type="checkbox" id="vitrin" style="width:20px;">
                <label for="vitrin" style="margin:0; cursor:pointer;">Ana Sayfa Vitrinine Ekle</label>
            </div>

            <button onclick="ekle()">YAYINLA</button>

            <div class="preview">
                <h3>Son Eklenenler</h3>
                <div id="liste" class="item-list">YÃ¼kleniyor...</div>
            </div>
        </div>
    </div>

    <script>
        // FIREBASE Ä°ÅžLEMLERÄ°
        const auth = firebase.auth();
        const db = firebase.firestore();

        // GÄ°RÄ°Åž KONTROLÃœ
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('panel-screen').style.display = 'block';
                listele();
            }
        });

        function girisYap() {
            const e = document.getElementById('email').value;
            const p = document.getElementById('password').value;
            auth.signInWithEmailAndPassword(e, p).catch(err => alert("Hata: " + err.message));
        }

        // VERÄ° EKLEME
        function ekle() {
            const baslik = document.getElementById('baslik').value;
            const aciklama = document.getElementById('aciklama').value;
            const link = document.getElementById('link').value;
            const kategori = document.getElementById('kategori').value;
            const vitrin = document.getElementById('vitrin').checked;
            const gorsel = document.getElementById('gorsel').value || "fa-gamepad"; // BoÅŸsa varsayÄ±lan ikon

            if(!baslik || !link) { alert("BaÅŸlÄ±k ve Link zorunludur!"); return; }

            db.collection("projeler").add({
                baslik: baslik,
                aciklama: aciklama,
                link: link,
                kategori: kategori,
                vitrin: vitrin,
                gorsel: gorsel, // YENÄ° ALAN
                tarih: firebase.firestore.FieldValue.serverTimestamp()
            }).then(() => {
                alert("BaÅŸarÄ±yla Eklendi! ðŸš€");
                document.getElementById('baslik').value = "";
                document.getElementById('aciklama').value = "";
                document.getElementById('link').value = "";
                document.getElementById('gorsel').value = "";
            }).catch(err => alert("Hata: " + err.message));
        }

        // LÄ°STELEME
        function listele() {
            db.collection("projeler").orderBy("tarih", "desc").limit(10).onSnapshot(snap => {
                let html = "";
                snap.forEach(doc => {
                    const data = doc.data();
                    html += `
                    <div class="item">
                        <div>
                            <div class="item-title">${data.baslik}</div>
                            <div class="item-cat">${data.kategori}</div>
                            ${data.vitrin ? '<span style="color:green; font-size:0.8rem; margin-left:5px;">â˜… Vitrin</span>' : ''}
                        </div>
                        <button class="delete-btn" onclick="sil('${doc.id}')">Sil</button>
                    </div>`;
                });
                document.getElementById('liste').innerHTML = html;
            });
        }

        function sil(id) {
            if(confirm("Silmek istediÄŸine emin misin?")) {
                db.collection("projeler").doc(id).delete();
            }
        }
    </script>

</body>
</html>
