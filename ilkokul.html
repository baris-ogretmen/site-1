<script>
        document.addEventListener("DOMContentLoaded", function() {
            
            // Veritabanı kontrolü
            if (!firebase.apps.length) {
                console.error("Firebase bulunamadı!");
                return;
            }

            const liste = document.getElementById("oyun-listesi");
            const db = firebase.firestore();
            const renkler = ["bg-blue", "bg-red", "bg-purple", "bg-orange"];

            liste.innerHTML = ""; // Yükleniyor yazısını temizle

            // DİKKAT: Buraya hem büyük hem küçük harf ihtimalini ekledim
            db.collection("projeler").get().then((snapshot) => {
                
                let oyunBulundu = false;
                
                snapshot.forEach((doc, index) => {
                    const veri = doc.data();
                    
                    // Kategori kontrolü (Büyük-küçük harf duyarlılığını kaldırdık)
                    // Gelen veri "İlkokul", "İLKOKUL" veya "ilkokul" olsa bile kabul edecek.
                    if (veri.kategori && veri.kategori.toUpperCase() === "İLKOKUL") {
                        
                        oyunBulundu = true;
                        const rastgeleRenk = renkler[index % renkler.length];

                        const html = `
                            <div class="game-card">
                                <div class="card-icon ${rastgeleRenk}">
                                    <i class="fas fa-gamepad"></i>
                                </div>
                                <div class="card-body">
                                    <h3 class="card-title">${veri.baslik}</h3>
                                    <p class="card-desc">${veri.aciklama || "Açıklama bulunmuyor."}</p>
                                    <a href="${veri.link}" target="_blank" class="play-btn">
                                        <i class="fas fa-play"></i> OYNA
                                    </a>
                                </div>
                            </div>
                        `;
                        liste.innerHTML += html;
                    }
                });

                // Eğer hiç oyun bulamazsa
                if (!oyunBulundu) {
                    liste.innerHTML = `
                        <div style="text-align:center; width:100%; padding:50px; background:white; border-radius:20px;">
                            <i class="fas fa-search" style="font-size:4rem; color:#ccc;"></i>
                            <h3 style="color:#888;">İlkokul kategorisinde oyun bulunamadı.</h3>
                            <p>Yönetici panelinden kategori ismini 'İLKOKUL' seçtiğine emin ol.</p>
                        </div>
                    `;
                }

            }).catch((error) => {
                console.error("Hata:", error);
                liste.innerHTML = "<p>Bir hata oluştu :(</p>";
            });
        });
    </script>
