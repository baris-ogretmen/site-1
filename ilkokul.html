<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ä°lkokul Akademi | BarÄ±ÅŸ Ã–ÄŸretmen</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        body { margin: 0; font-family: 'Fredoka', sans-serif; background: #eff6ff; color: #333; padding-bottom: 50px; }
        
        /* HEADER - MEVCUT TASARIM */
        header { 
            background: #3b82f6; padding: 30px; text-align: center; color: white; 
            border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; 
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3); 
        }
        .back-btn { display: inline-block; background: rgba(255,255,255,0.2); color: white; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; margin-bottom: 15px; }
        
        .container { max-width: 900px; margin: 30px auto; padding: 0 15px; }
        
        /* SINIF BUTONLARI (YENÄ° EKLENEN KISIM) */
        .class-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 40px; }
        .class-card { 
            background: white; border-radius: 20px; padding: 15px; text-align: center; cursor: pointer;
            box-shadow: 0 5px 10px rgba(0,0,0,0.05); transition: 0.3s; border: 3px solid transparent;
        }
        .class-card:hover { transform: translateY(-5px); }
        .class-card.active { transform: scale(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        /* SÄ±nÄ±f Renkleri */
        .c-1 { border-color: #ef4444; color: #ef4444; } .c-1.active { background: #fef2f2; }
        .c-2 { border-color: #3b82f6; color: #3b82f6; } .c-2.active { background: #eff6ff; }
        .c-3 { border-color: #10b981; color: #10b981; } .c-3.active { background: #ecfdf5; }
        .c-4 { border-color: #8b5cf6; color: #8b5cf6; } .c-4.active { background: #f5f3ff; }
        
        .class-num { font-size: 2rem; font-weight: bold; display: block; }
        .class-label { font-size: 0.9rem; font-weight: 600; }

        /* BAÅžLIKLAR */
        .section-title { font-size: 1.3rem; color: #1e40af; margin: 30px 0 20px; border-bottom: 3px solid #bfdbfe; display: inline-block; padding-bottom: 5px; }
        
        /* OYUN KARTLARI */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        
        .game-card { 
            background: white; border-radius: 20px; padding: 20px; display: flex; align-items: center; gap: 15px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; text-decoration: none; color: inherit; 
            border-left: 6px solid #3b82f6; position: relative; overflow: hidden;
        }
        .game-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(59, 130, 246, 0.15); }
        
        .icon-circle { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; flex-shrink: 0; background: #eff6ff; color: #3b82f6; }
        .card-content h3 { margin: 0 0 5px; font-size: 1.1rem; color: #1e40af; }
        .card-content p { margin: 0; font-size: 0.85rem; color: #64748b; }
        
        /* Renk TemalarÄ± (Mevcut Koddan Korundu) */
        .gold-theme { border-left-color: #f59e0b; background: #fffbeb; } .gold-theme .icon-circle { background: #f59e0b; color: white; }
        .cyan-theme { border-left-color: #06b6d4; background: #ecfeff; } .cyan-theme .icon-circle { background: #06b6d4; color: white; }
        
        /* Mobil Uyumu */
        @media (max-width: 600px) { .class-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Ana Sayfa</a>
        <h1>Ä°lkokul Akademi</h1>
        <div style="margin-top:5px;">BarÄ±ÅŸ Hoca ile EÄŸlenceli Ã–ÄŸrenme</div>
    </header>

    <div class="container">

        <div class="section-title">SÄ±nÄ±fÄ±nÄ± SeÃ§ ðŸŽ’</div>
        <div class="class-grid">
            <div class="class-card c-1" onclick="filtrele('1', this)">
                <span class="class-num">1</span>
                <span class="class-label">. SINIF</span>
            </div>
            <div class="class-card c-2" onclick="filtrele('2', this)">
                <span class="class-num">2</span>
                <span class="class-label">. SINIF</span>
            </div>
            <div class="class-card c-3" onclick="filtrele('3', this)">
                <span class="class-num">3</span>
                <span class="class-label">. SINIF</span>
            </div>
            <div class="class-card c-4" onclick="filtrele('4', this)">
                <span class="class-num">4</span>
                <span class="class-label">. SINIF</span>
            </div>
        </div>

        <div class="section-title" id="liste-baslik">TÃ¼m Etkinlikler</div>
        <div id="dinamik-oyunlar" class="grid">
            <div style="grid-column: 1/-1; text-align:center; color:#999; padding:20px;">
                <i class="fas fa-spinner fa-spin"></i> YÃ¼kleniyor...
            </div>
        </div>

        <hr style="margin: 40px 0; border: 0; border-top: 2px dashed #ddd;">

        <div class="section-title">ðŸŒŸ Ã–nerilen Ã‡alÄ±ÅŸmalar</div>
        <div class="grid">
            <a href="https://baris-ogretmen.github.io/bilal--icin/" class="game-card gold-theme" target="_blank">
                <div class="icon-circle"><i class="fas fa-book-reader"></i></div>
                <div class="card-content"><h3>TÃ¼rkÃ§e ve Matematik</h3><p>Temel beceri geliÅŸtirme.</p></div>
            </a>
            <a href="https://baris-ogretmen.github.io/okuma-yazma/" class="game-card cyan-theme" target="_blank">
                <div class="icon-circle"><i class="fas fa-robot"></i></div>
                <div class="card-content"><h3>Robot ArkadaÅŸÄ±m</h3><p>Okuma yazma serÃ¼veni.</p></div>
            </a>
            <a href="https://baris-ogretmen.github.io/turkce-canavar/" class="game-card" style="border-left-color:#ef4444;" target="_blank">
                <div class="icon-circle" style="background:#fef2f2; color:#ef4444;"><i class="fas fa-dragon"></i></div>
                <div class="card-content"><h3>TÃ¼rkÃ§e CanavarÄ±</h3><p>Dikkat ve dil bilgisi.</p></div>
            </a>
            <a href="https://baris-ogretmen.github.io/bilsem-akademi-2/" class="game-card" style="border-left-color:#a855f7;" target="_blank">
                <div class="icon-circle" style="background:#faf5ff; color:#a855f7;"><i class="fas fa-lightbulb"></i></div>
                <div class="card-content"><h3>BÄ°LSEM Akademi</h3><p>Zeka ve mantÄ±k sorularÄ±.</p></div>
            </a>
        </div>

    </div>

    <script>
        const db = firebase.firestore();
        let tumProjeler = [];

        // 1. VERÄ°LERÄ° Ã‡EK
        db.collection("projeler").orderBy("tarih", "desc").onSnapshot((snapshot) => {
            tumProjeler = [];
            snapshot.forEach((doc) => {
                const veri = doc.data();
                // Sadece ilkokul alakalÄ± verileri al
                const k = (veri.kategori || "").toLowerCase();
                if (k.includes("1") || k.includes("2") || k.includes("3") || k.includes("4") || k.includes("ilkokul") || k.includes("okuma") || k.includes("anaokulu")) {
                    tumProjeler.push(veri);
                }
            });
            // Ä°lk aÃ§Ä±lÄ±ÅŸta hepsini gÃ¶ster
            listele(tumProjeler);
        });

        // 2. FÄ°LTRELEME
        function filtrele(sinif, kart) {
            document.querySelectorAll('.class-card').forEach(c => c.classList.remove('active'));
            if(kart) kart.classList.add('active');

            document.getElementById('liste-baslik').innerText = `${sinif}. SÄ±nÄ±f Etkinlikleri`;

            const filtrelenmis = tumProjeler.filter(p => {
                return p.kategori && p.kategori.includes(sinif);
            });
            listele(filtrelenmis);
        }

        // 3. LÄ°STELEME
        function listele(liste) {
            const div = document.getElementById('dinamik-oyunlar');
            div.innerHTML = "";

            if (liste.length === 0) {
                div.innerHTML = `<div style="grid-column: 1/-1; text-align:center; padding:20px; background:white; border-radius:15px; color:#777;">HenÃ¼z bu sÄ±nÄ±fa Ã¶zel iÃ§erik yok. AÅŸaÄŸÄ±daki Ã¶nerilenlere bakabilirsin! ðŸ‘‡</div>`;
                return;
            }

            liste.forEach(p => {
                // Ä°kon belirle
                let ikon = p.icon || "fa-gamepad";
                if(!p.icon) {
                    const ad = p.baslik.toLowerCase();
                    if(ad.includes("mat")) ikon = "fa-calculator";
                    else if(ad.includes("okuma") || ad.includes("tÃ¼rkÃ§e")) ikon = "fa-book-open";
                    else if(ad.includes("fen")) ikon = "fa-leaf";
                }

                // Dinamik renk atama
                const renkler = ["#3b82f6", "#ef4444", "#10b981", "#f59e0b", "#8b5cf6"];
                const rastgeleRenk = renkler[Math.floor(Math.random() * renkler.length)];

                div.innerHTML += `
                <a href="${p.link}" class="game-card" style="border-left-color:${rastgeleRenk};">
                    <div class="icon-circle" style="color:${rastgeleRenk}; background:${rastgeleRenk}15;">
                        <i class="fas ${ikon}"></i>
                    </div>
                    <div class="card-content">
                        <h3>${p.baslik}</h3>
                        <p>${p.kategori} â€¢ ${p.aciklama || 'EÄŸlenceli Etkinlik'}</p>
                    </div>
                </a>`;
            });
        }
    </script>

</body>
</html>
