<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Özel Eğitim & Gelişim | Barış İlkan</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f0fdfa; color: #333; padding-bottom: 50px; }
        header { background: linear-gradient(135deg, #0d9488 0%, #115e59 100%); padding: 30px 20px; text-align: center; color: white; border-bottom-left-radius: 40px; border-bottom-right-radius: 40px; }
        .back-btn { display: inline-block; background: rgba(255,255,255,0.2); color: white; padding: 8px 15px; border-radius: 20px; text-decoration: none; font-weight: bold; margin-bottom: 15px; }
        .container { max-width: 800px; margin: 30px auto; padding: 0 15px; }
        .section-title { font-weight: 800; color: #0f766e; margin: 40px 0 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }
        .section-title::after { content: ''; flex: 1; height: 2px; background: #ccfbf1; margin-left: 10px; }
        .tool-card { background: white; border-radius: 15px; padding: 20px; display: flex; align-items: center; gap: 20px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); border: 1px solid #e2e8f0; text-decoration: none; color: inherit; }
        .dynamic-card { border-left: 5px solid #2dd4bf; background: #f0fdfa; }
        .icon-box { width: 50px; height: 50px; background: #ccfbf1; color: #0d9488; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .article-item { background: white; border-left: 5px solid #f59e0b; padding: 20px; border-radius: 10px; margin-bottom: 15px; cursor: pointer; }
        /* Modal Stilleri */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center; }
        .report-modal { background: white; padding: 25px; border-radius: 20px; width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; }
    </style>
</head>
<body>

    <header>
        <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Ana Sayfa</a>
        <h1>Özel Eğitim & Gelişim</h1>
        <p style="margin:5px 0 0; opacity:0.9;">"Her çocuk özeldir."</p>
    </header>

    <div class="container">
        <div class="section-title"><i class="fas fa-star"></i> Öne Çıkan Çalışma</div>
        <a href="https://baris-ogretmen.github.io/rapor-degerlendirme/" class="tool-card" style="border-left: 5px solid #d97706; background:#fffbf0;">
            <div class="icon-box" style="background:#fffbeb; color:#d97706;"><i class="fas fa-file-signature"></i></div>
            <div><h3>RAM Rapor Analizi</h3><p>Raporları analiz et.</p></div>
        </a>

        <div class="section-title"><i class="fas fa-gamepad"></i> Dijital Materyaller</div>
        <a href="https://baris-ogretmen.github.io/sevimli-canavar/" class="tool-card" style="border-left: 5px solid #ec4899;">
            <div class="icon-box" style="background:#fce7f3; color:#ec4899;"><i class="fas fa-ghost"></i></div>
            <div><h3>Sevimli Canavar</h3><p>Dikkat çalışması.</p></div>
        </a>
        <a href="https://baris-ogretmen.github.io/goz-temasi/" class="tool-card" style="border-left: 5px solid #3b82f6;">
            <div class="icon-box" style="background:#eff6ff; color:#3b82f6;"><i class="fas fa-eye"></i></div>
            <div><h3>Göz Teması</h3><p>Göz takip uygulaması.</p></div>
        </a>

        <div id="ozel-egitim-baslik" class="section-title" style="display:none;"><i class="fas fa-plus-circle"></i> Yeni Eklenenler</div>
        <div id="ozel-egitim-listesi"></div>

        <div class="section-title"><i class="fas fa-book-reader"></i> Köşe Yazıları</div>
        <div id="yazi-listesi"><p style="color:#999; text-align:center;">Yükleniyor...</p></div>
    </div>

    <div class="modal-overlay" id="yazi-modal"><div class="report-modal"><h3 id="modal-baslik"></h3><div id="modal-icerik"></div><button onclick="kapat('yazi-modal')" style="margin-top:20px; padding:10px 20px;">Kapat</button></div></div>

    <script>
        const db = firebase.firestore();
        let makaleVerileri = {};

        // 1. OYUNLARI ÇEK (YENİLENMİŞ FİLTRE)
        db.collection("projeler").get().then((snapshot) => {
            const liste = document.getElementById("ozel-egitim-listesi");
            const baslik = document.getElementById("ozel-egitim-baslik");
            
            snapshot.forEach((doc) => {
                const veri = doc.data();
                
                // HATA ÖNLEYİCİ KONTROL
                // Kategoriyi küçük harfe çevirip içinde 'ozel' veya 'özel' geçiyor mu diye bakıyoruz.
                // Böylece "Ozel", "ÖZEL", "ozel egitim" hepsini kabul eder.
                let kategori = "";
                if (veri.kategori) {
                    kategori = veri.kategori.toString().toLowerCase();
                }

                if (kategori.includes("özel") || kategori.includes("ozel")) {
                    
                    // Sabit olanları tekrar gösterme
                    const sabitLinkler = ["https://baris-ogretmen.github.io/rapor-degerlendirme/", "https://baris-ogretmen.github.io/sevimli-canavar/", "https://baris-ogretmen.github.io/goz-temasi/"];
                    
                    if (!sabitLinkler.includes(veri.link)) {
                        baslik.style.display = "flex";
                        liste.innerHTML += `
                            <a href="${veri.link}" class="tool-card dynamic-card">
                                <div class="icon-box"><i class="fas fa-puzzle-piece"></i></div>
                                <div>
                                    <h3 style="margin:0 0 5px;">${veri.baslik}</h3>
                                    <p style="margin:0; font-size:0.9rem; color:#666;">${veri.aciklama || 'Yeni materyal'}</p>
                                </div>
                            </a>`;
                    }
                }
            });
        });

        // 2. YAZILARI ÇEK
        db.collection("yazilar").orderBy("tarih", "desc").onSnapshot(snap => {
            let html = "";
            if(snap.empty) { document.getElementById('yazi-listesi').innerHTML = "<p style='text-align:center; color:#999'>Yazı yok.</p>"; return; }
            snap.forEach(doc => {
                const y = doc.data();
                makaleVerileri[doc.id] = y.icerik;
                html += `<div class="article-item" onclick="yaziAc('${doc.id}', '${y.baslik}')"><b>${y.baslik}</b><br><small>Oku &rarr;</small></div>`;
            });
            document.getElementById('yazi-listesi').innerHTML = html;
        });

        function yaziAc(id, baslik) {
            document.getElementById('modal-baslik').innerText = baslik;
            document.getElementById('modal-icerik').innerHTML = makaleVerileri[id];
            document.getElementById('yazi-modal').style.display = 'flex';
        }
        function kapat(id) { document.getElementById(id).style.display = 'none'; }
    </script>

</body>
</html>
