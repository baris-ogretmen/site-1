<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Otomatik Tamir</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #ecfeff; text-align: center; }
        .box { background: white; padding: 30px; border-radius: 15px; border: 3px solid #0891b2; max-width: 500px; }
        h2 { color: #0e7490; }
        button { background: #0891b2; color: white; border: none; padding: 15px 40px; font-size: 1.3rem; font-weight: bold; border-radius: 10px; cursor: pointer; margin-top: 20px; width: 100%; }
        button:hover { background: #155e75; }
        #durum { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="box">
        <h2>ğŸ”§ Vitrindeki KitabÄ± Tamir Et</h2>
        <p>Butona basÄ±nca site adresini algÄ±layÄ±p resimleri kitaba gÃ¶mer.</p>
        <button onclick="tamirEt()">TAMÄ°R ET VE BÄ°TÄ°R</button>
        <div id="durum"></div>
    </div>

    <script>
        function tamirEt() {
            const db = firebase.firestore();
            const durum = document.getElementById("durum");
            durum.innerHTML = "â³ Adres algÄ±lanÄ±yor...";
            durum.style.color = "orange";

            // SÄ°TE ADRESÄ°NÄ° OTOMATÄ°K BULUR (Hata yapma ÅŸansÄ± yok)
            // Ã–rn: https://baris-ogretmen.github.io/
            let yol = window.location.href;
            yol = yol.substring(0, yol.lastIndexOf('/') + 1);
            
            console.log("Resim Yolu: " + yol);

            // SENÄ°N VÄ°TRÄ°NDEKÄ° KÄ°TABIN ID'SÄ°
            const kitapID = "dt8snrbRkivYCHnDPzKF";

            const yeniVeri = {
                baslik: "Kalplerin Kandili: Ä°mam Rabbaniâ€™nin YolculuÄŸu",
                sayfalar: [
                    { img: yol + "rab1.jpg", text: "Ã‡ok uzun zaman Ã¶nce, Hindistanâ€™Ä±n Sarhind kasabasÄ±nda Ahmad adÄ±nda bir Ã§ocuk yaÅŸardÄ±. Ahmad, akranlarÄ± oyun oynarken bile elinden kitabÄ±nÄ± dÃ¼ÅŸÃ¼rmezdi. BabasÄ± Abdal-Ahad, oÄŸlundaki bu Ã¶ÄŸrenme aÅŸkÄ±nÄ± gÃ¶rÃ¼nce gÃ¼lÃ¼msedi. 'Bilgi, karanlÄ±kta yolunu bulmanÄ± saÄŸlayan bir yÄ±ldÄ±zdÄ±r Ahmad,' dedi." },
                    { img: yol + "rab2.jpg", text: "KÃ¼Ã§Ã¼k Ahmad, o gece yÄ±ldÄ±zlara bakarak iÃ§inden bir sÃ¶z verdi: Sadece kendisi iÃ§in deÄŸil, herkes iÃ§in bir Ä±ÅŸÄ±k olacaktÄ±. YÄ±llar geÃ§tikÃ§e Ahmadâ€™Ä±n kalbindeki merak daha da bÃ¼yÃ¼dÃ¼." },
                    { img: yol + "rab3.jpg", text: "Sadece kitaplardaki bilgileri deÄŸil, hayatÄ±n ve sevginin anlamÄ±nÄ± da merak ediyordu. Åehrin en bÃ¼yÃ¼k kÃ¼tÃ¼phanelerinde sabahladÄ±. Bir gÃ¼n, 'GerÃ§ek bilgi sadece zihinle deÄŸil, kalple Ã¶ÄŸrenilir,' diye dÃ¼ÅŸÃ¼ndÃ¼." },
                    { img: yol + "rab4.jpg", text: "Bu dÃ¼ÅŸÃ¼nceyle, ruhunu eÄŸitecek bÃ¼yÃ¼k bir Ã¶ÄŸretmen aramaya karar verdi. Sonunda Delhi ÅŸehrine ulaÅŸtÄ± ve bilge bir Ã¶ÄŸretmen olan Baqi ile tanÄ±ÅŸtÄ±." },
                    { img: yol + "rab5.jpg", text: "Baqi, Ahmadâ€™Ä±n gÃ¶zlerindeki kararlÄ±lÄ±ÄŸÄ± gÃ¶rdÃ¼. Ona sabretmeyi, tevazuyu ve her canlÄ±nÄ±n iÃ§indeki gÃ¼zelliÄŸi gÃ¶rmeyi Ã¶ÄŸretti. Ahmad, hocasÄ±nÄ±n yanÄ±nda diz Ã§Ã¶ktÃ¼ ve sessizliÄŸin sesini dinlemeye baÅŸladÄ±." },
                    { img: yol + "rab6.jpg", text: "ArtÄ±k o, sadece Ã¶ÄŸrenen deÄŸil, olgunlaÅŸan bir yolcuydu. EÄŸitimini tamamlayan Ahmad, Sarhindâ€™e geri dÃ¶ndÃ¼. ArtÄ±k insanlar ona 'Ä°mam Rabbani' diyordu, yani 'Kendini Allah'a adayan Ã¶nder.'" },
                    { img: yol + "rab7.jpg", text: "GenÃ§ yaÅŸlÄ± herkes onun etrafÄ±nda toplanÄ±yordu. Onun en genÃ§ Ã¶ÄŸrencisi Sami, bir gÃ¼n yanÄ±na gelip, 'Efendim, en bÃ¼yÃ¼k ders nedir?' diye sordu. Ä°mam Rabbani, 'DÃ¼rÃ¼stlÃ¼k ve sevgiyle yoÄŸrulmuÅŸ bir ahlaktÄ±r evladÄ±m,' diye cevap verdi." },
                    { img: yol + "rab8.jpg", text: "Zamanla insanlar doÄŸruyu unutmaya ve haksÄ±zlÄ±k yapmaya baÅŸlamÄ±ÅŸtÄ±. Ä°mam Rabbani, saraydaki yanlÄ±ÅŸ uygulamalara karÅŸÄ± cesurca durdu. DoÄŸruyu sÃ¶ylediÄŸi iÃ§in bir kaleye hapsedildi. Ancak o, karanlÄ±k zindanÄ± bile bir okul haline getirdi." },
                    { img: yol + "rab9.jpg", text: "Zindandan Ã§Ä±ktÄ±ÄŸÄ±nda, o artÄ±k 'Bin YÄ±lÄ±n Yenileyicisi' olarak anÄ±lÄ±yordu. Binlerce sayfalÄ±k mektuplar yazdÄ±. Bu mektuplarda; doÄŸruluÄŸu, kardeÅŸliÄŸi ve sevginin gÃ¼cÃ¼nÃ¼ anlattÄ±. YazdÄ±ÄŸÄ± her kelime, bir kalbi iyileÅŸtiriyordu." },
                    { img: yol + "rab10.jpg", text: "Bir gÃ¼n Sami ile bahÃ§ede yÃ¼rÃ¼rken yerdeki bir karÄ±ncayÄ± fark ettiler. Ä°mam Rabbani durdu ve Samiâ€™ye, 'Evrendeki her ÅŸey bir dÃ¼zen iÃ§indedir. En kÃ¼Ã§Ã¼k karÄ±ncadan en bÃ¼yÃ¼k yÄ±ldÄ±za kadar her ÅŸey bize bir ÅŸeyler anlatÄ±r,' dedi." },
                    { img: yol + "rab11.jpg", text: "Ä°mam Rabbaniâ€™nin en bÃ¼yÃ¼k mirasÄ±, yazdÄ±ÄŸÄ± 'Mektubat' isimli eseriydi. BugÃ¼n bile, bir Ã§ocuk dÃ¼rÃ¼st olduÄŸunda, Ä°mam Rabbaniâ€™nin ektiÄŸi o tohumlar Ã§iÃ§ek aÃ§maya devam ediyor. <b>Kalbinde sevgi ve zihninde doÄŸru bilgi olan hiÃ§ kimse, yolunu asla kaybetmez.</b> -SON-" }
                ]
            };

            db.collection("dijital_kitaplar").doc(kitapID).update(yeniVeri)
            .then(() => {
                durum.innerHTML = "âœ… BAÅARILI! (" + yol + " adresi kullanÄ±ldÄ±)";
                durum.style.color = "green";
                alert("Harika! Resimler baÄŸlandÄ±. Åimdi ana sayfaya gidip kitabÄ±na bakabilirsin.");
            })
            .catch((hata) => {
                durum.innerHTML = "Hata: " + hata.message;
                durum.style.color = "red";
            });
        }
    </script>
</body>
</html>
