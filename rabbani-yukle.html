<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Hikaye YÃ¼kleyici - Ä°mam Rabbani</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #fff7ed; text-align: center; }
        .card { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 500px; border: 3px solid #f97316; }
        h2 { color: #c2410c; }
        p { font-size: 1.1rem; color: #555; }
        button { background: #f97316; color: white; border: none; padding: 15px 30px; font-size: 1.2rem; font-weight: bold; border-radius: 10px; cursor: pointer; transition: 0.2s; margin-top: 20px; width: 100%; }
        button:hover { background: #c2410c; transform: scale(1.02); }
        #durum { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“š Ä°mam Rabbani Hikayesi</h2>
        <p>Senin gÃ¶nderdiÄŸin hikaye, Ã§ocuklar iÃ§in renkli ve dikkat Ã§ekici ÅŸekilde hazÄ±rlandÄ±.</p>
        <p>YÃ¼klemek iÃ§in butona bas.</p>
        <button onclick="hikayeyiYukle()">HÄ°KAYEYÄ° SÄ°STEME YÃœKLE</button>
        <div id="durum"></div>
    </div>

    <script>
        function hikayeyiYukle() {
            const db = firebase.firestore();
            const durum = document.getElementById("durum");
            durum.innerText = "â³ Hikaye yÃ¼kleniyor...";

            // HÄ°KAYE VERÄ°LERÄ° (Senin Metnin - Renkli FormatlanmÄ±ÅŸ)
            const kitapVerisi = {
                baslik: "Kalplerin Kandili: Ä°mam Rabbaniâ€™nin YolculuÄŸu",
                tarih: firebase.firestore.FieldValue.serverTimestamp(),
                sayfalar: [
                    {
                        // KAPAK
                        img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiQ5yN7j4t8gXqJq5Z8kL9mN0oP1qR2sT3uV4wX5yZ6aB7cC8dD9eE0fF1gH2iJ3kL4mN5oP6qR7sT8uV9wX0yZ1aB2cC3dD4eE5fF6gH7iJ8kL9mN0oP1qR2/s1600/imam-rabbani.jpg", 
                        text: "<h2 style='color:#ea580c;'>Kalplerin Kandili</h2><br>Ã‡ok uzun zaman Ã¶nce, Hindistanâ€™Ä±n Sarhind kasabasÄ±nda <b>Ahmad</b> adÄ±nda bir Ã§ocuk yaÅŸardÄ±.<br><br>Ahmad, akranlarÄ± oyun oynarken bile elinden kitabÄ±nÄ± dÃ¼ÅŸÃ¼rmezdi. BabasÄ± Abdal-Ahad, oÄŸlundaki bu Ã¶ÄŸrenme aÅŸkÄ±nÄ± gÃ¶rÃ¼nce gÃ¼lÃ¼msedi:<br><br><b style='color:#d97706; font-size:1.2rem;'>'Bilgi, karanlÄ±kta yolunu bulmanÄ± saÄŸlayan bir yÄ±ldÄ±zdÄ±r Ahmad.'</b>"
                    },
                    {
                        // SAYFA 2
                        img: "https://img.freepik.com/free-vector/gradient-library-interior-background_23-2149330623.jpg", 
                        text: "KÃ¼Ã§Ã¼k Ahmad, o gece yÄ±ldÄ±zlara bakarak iÃ§inden bir sÃ¶z verdi: <b style='color:#059669;'>Sadece kendisi iÃ§in deÄŸil, herkes iÃ§in bir Ä±ÅŸÄ±k olacaktÄ±.</b><br><br>YÄ±llar geÃ§tikÃ§e Ahmadâ€™Ä±n kalbindeki merak daha da bÃ¼yÃ¼dÃ¼.<br><br>Bir gÃ¼n ÅŸÃ¶yle dÃ¼ÅŸÃ¼ndÃ¼: <b style='color:#2563eb;'>'GerÃ§ek bilgi sadece zihinle deÄŸil, kalple Ã¶ÄŸrenilir.'</b> Bu dÃ¼ÅŸÃ¼nceyle, ruhunu eÄŸitecek bÃ¼yÃ¼k bir Ã¶ÄŸretmen aramaya karar verdi."
                    },
                    {
                        // SAYFA 3
                        img: "https://img.freepik.com/free-vector/teacher-standing-near-blackboard-holding-stick-isolated-flat-vector-illustration-cartoon-woman-character-near-chalkboard-school-learning-concept_74855-13272.jpg", 
                        text: "Sonunda Delhi ÅŸehrine ulaÅŸtÄ± ve bilge Ã¶ÄŸretmen Baqi ile tanÄ±ÅŸtÄ±. Baqi ona sabretmeyi ve her canlÄ±nÄ±n iÃ§indeki gÃ¼zelliÄŸi gÃ¶rmeyi Ã¶ÄŸretti.<br><br>EÄŸitimini tamamlayan Ahmad, artÄ±k <b>'Ä°mam Rabbani'</b> (Kendini Allah'a adayan Ã¶nder) olarak anÄ±lÄ±yordu.<br><br>GenÃ§ Ã¶ÄŸrencisi Sami'ye ÅŸÃ¶yle dedi: <b style='color:#dc2626; font-size:1.1rem;'>'En bÃ¼yÃ¼k ders; dÃ¼rÃ¼stlÃ¼k ve sevgiyle yoÄŸrulmuÅŸ bir ahlaktÄ±r evladÄ±m.'</b>"
                    },
                    {
                        // SAYFA 4
                        img: "https://img.freepik.com/free-vector/hand-drawn-essay-illustration_23-2150268421.jpg", 
                        text: "O dÃ¶nemde haksÄ±zlÄ±klar artmÄ±ÅŸtÄ±. Ä°mam Rabbani doÄŸruyu sÃ¶ylediÄŸi iÃ§in bir kaleye hapsedildi. Ancak o, karanlÄ±k zindanÄ± bile bir okul haline getirdi.<br><br>Zindandan Ã§Ä±ktÄ±ÄŸÄ±nda, artÄ±k <b>'Bin YÄ±lÄ±n Yenileyicisi'</b> olarak anÄ±lÄ±yordu.<br><br>Binlerce sayfalÄ±k mektuplar yazdÄ±. <b style='color:#059669;'>YazdÄ±ÄŸÄ± her kelime, bir kalbi iyileÅŸtiriyordu.</b>"
                    },
                    {
                        // SAYFA 5 (SON)
                        img: "https://img.freepik.com/free-vector/mosque-landscape-background_1308-27807.jpg", 
                        text: "Bir gÃ¼n Sami ile bahÃ§ede yÃ¼rÃ¼rken, <b style='color:#ea580c;'>'En kÃ¼Ã§Ã¼k karÄ±ncadan en bÃ¼yÃ¼k yÄ±ldÄ±za kadar her ÅŸey bize bir ÅŸeyler anlatÄ±r,'</b> dedi.<br><br>BugÃ¼n bile bir Ã§ocuk dÃ¼rÃ¼st olduÄŸunda, Ä°mam Rabbaniâ€™nin ektiÄŸi o tohumlar Ã§iÃ§ek aÃ§Ä±yor.<br><br><b style='color:#2563eb;'>Kalbinde sevgi ve zihninde doÄŸru bilgi olan hiÃ§ kimse, yolunu asla kaybetmez.</b><br><br><b>-SON-</b>"
                    }
                ]
            };

            // 1. DÄ°JÄ°TAL KÄ°TAPLARA EKLE
            db.collection("dijital_kitaplar").add(kitapVerisi).then((docRef) => {
                const link = `kitap-oku.html?id=${docRef.id}`;

                // 2. KÄ°TAP LÄ°STESÄ°NE EKLE (E-KitaplarÄ±m)
                db.collection("kitaplar").add({
                    baslik: kitapVerisi.baslik,
                    altBaslik: "GÃ¶nÃ¼ller SultanÄ±",
                    link: link,
                    renk: "linear-gradient(135deg, #f97316, #c2410c)", // Turuncu Tema
                    sira: 1000,
                    tarih: firebase.firestore.FieldValue.serverTimestamp()
                }).then(() => {
                    
                    // 3. MAVÄ° VÄ°TRÄ°N KUTUSUNA KOY
                    db.collection("site_ayarlari").doc("vitrin_kitap").set({
                        baslik: kitapVerisi.baslik,
                        link: link
                    });

                    durum.innerHTML = "âœ… KÄ°TAP BAÅARIYLA EKLENDÄ°!";
                    durum.style.color = "green";
                    alert("Ä°ÅŸlem Tamam! Kitap hem listeye hem de mavi kutuya eklendi.");
                });
            }).catch((err) => {
                durum.innerHTML = "Hata: " + err.message;
                durum.style.color = "red";
            });
        }
    </script>
</body>
</html>
